---
title: "Proyecto - Minería de datos - Willy Ardiano - 999017224"
output: html_notebook
github: https://github.com/willyrex9912/proyecto-mineria-de-datos.git
---

Análisis sobre los "Accidentes de tránsito" en Guatemala.

Instalando y cargando librerías necesarias
```{r}

#install.packages("readxl")
library(readxl)
library(dplyr)

```

Cargando archivo con datos del año 2018
```{r}
datos_2018 <- read_excel("data/hechos-de-transito-ano-2018.xlsx")
datos_2019 <- read_excel("data/hechos-de-transito-ano-2019.xlsx")
datos_2020 <- read_excel("data/hechos-de-transito-ano-2020.xlsx")
datos_2021 <- read_excel("data/hechos-de-transito-ano-2021.xlsx")
datos_2022 <- read_excel("data/hechos-de-transito-ano-2022.xlsx")
datos_2023 <- read_excel("data/hechos-de-transito-ano-2023.xlsx")
datos_2024 <- read_excel("data/hechos-de-transito-ano-2024.xlsx")
```

Verificando estructuras
```{r}

data.frame(1:ncol(datos_2018), colnames(datos_2018))
data.frame(1:ncol(datos_2019), colnames(datos_2019))
data.frame(1:ncol(datos_2020), colnames(datos_2020))
data.frame(1:ncol(datos_2021), colnames(datos_2021))
data.frame(1:ncol(datos_2022), colnames(datos_2022))
data.frame(1:ncol(datos_2023), colnames(datos_2023))
data.frame(1:ncol(datos_2024), colnames(datos_2024))

```

Estandarizando nombres de columnas
```{r}
library(stringr)
normalizar_nombres <- function(nombres) {
  nombres %>%
    # Convertir a mayúsculas
    toupper() %>%
    # Eliminar tildes y caracteres especiales
    iconv(from = "UTF-8", to = "ASCII//TRANSLIT") %>%
    # Reemplazar espacios por guiones bajos
    str_replace_all(" ", "_") %>%
    # Eliminar múltiples guiones bajos consecutivos
    str_replace_all("_+", "_") %>%
    # Eliminar guiones bajos al inicio o final
    str_remove_all("^_|_$")
}

names(datos_2018) <- normalizar_nombres(names(datos_2018))
names(datos_2019) <- normalizar_nombres(names(datos_2019))
names(datos_2020) <- normalizar_nombres(names(datos_2020))
names(datos_2021) <- normalizar_nombres(names(datos_2021))
names(datos_2022) <- normalizar_nombres(names(datos_2022))
names(datos_2023) <- normalizar_nombres(names(datos_2023))
names(datos_2024) <- normalizar_nombres(names(datos_2024))

```

Eliminando columna "ZONA_CIUDAD" ya que unicamente se encuentra en los datos de 2021
```{r}
datos_2021 <- datos_2021[,-12]
```

Cambiando orden de columnas en datos 2018 para estandarizar orden
```{r}
datos_2018 <- datos_2018 %>% select(1:8, DEPTO_OCU, MUPIO_OCU, everything())
```


Uniendo todos los datos para obtener solo un dataframe
```{r}
df <- bind_rows(datos_2018, datos_2019, datos_2020, datos_2021, datos_2022, datos_2023, datos_2024)

head(df)
tail(df)
```







